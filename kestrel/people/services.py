from django.contrib.auth.models import Userfrom kestrel.people.models import Persondef reset(request, csrfmiddlewaretoken, username, resetpass = None, **kwargs):	kwargs['page'] = 'account/login'	success = False	errors = None		if request.user.is_authenticated():		return kwargs		try:		u = User.objects.get(username = username)		if u.get_profile().reset():			success = True		else:			errors = 'Invalid username'	except Exception:		errors = 'Invalid username'		kwargs['data'] = { 'success' : success, 'errors' : errors }	return kwargsdef edit(request, csrfmiddlewaretoken, username, first_name, last_name, 	desc = '', phone = '', address = '', gender = 'N', dateofbirth = None, edit = None,  _ts = None, **kwargs):	kwargs['page'] = 'page/person'	data = { 'success' : False, 'errors' : None, 'view' : True }	user = request.user.get_profile().id if request.user.is_authenticated() else -1		try :		u = User.objects.get(username = username)		p = u.get_profile()		u.first_name = first_name		u.last_name = last_name		p.desc = desc		p.phone = phone		p.address = address		p.gender = gender		if dateofbirth:			p.dateofbirth = dateofbirth		p.edit(user = user)		data['user'] = u		data['person'] = p		data['admin'] = 1		data['success'] = True	except Exception:		data['errors'] = 'Invalid User ID'			kwargs['data'] = data	return kwargs